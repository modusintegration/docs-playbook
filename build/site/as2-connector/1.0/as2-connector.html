<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AS2 Connector 2.0.0 :: PortX(TM) Docs Prototype</title>
    <link rel="canonical" href="https://modusbox.org/as2-connector/1.0/as2-connector.html">
    <meta name="keywords" content="b2b, as2, connector">
    <meta name="generator" content="Antora 1.0.1">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://modusbox.org">PortX(TM) Docs Prototype</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="as2-connector" data-version="1.0">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="as2-connector.html">AS2 Connector</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="as2-connector.html">AS2 Connector</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">AS2 Connector</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">AS2 Connector</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="as2-connector.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">FTPS Connector</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ftps-connector/1.0/ftps-connector.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Partner Manager Connector</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../pmc/1.0/pmc.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">PortX(TM)</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../portx/LiftOff/index.html">LiftOff</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../release-notes/1.0/release-notes.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Trade Route(TM)</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../trade-route/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../portx/LiftOff/index.html" class="home-link"></a>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="as2-connector.html">AS2 Connector</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/modusintegration/modusbox-docs/edit/dev/as2-connector/modules/ROOT/pages/as2-connector.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>AS2 Connector 2.0.0</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://www.anypoint.mulesoft.com/exchange/?search=as2">AS2 Connector</a> allows you to send and receive data from AS2 certified servers.</p>
</div>
<div class="paragraph">
<p>After reading this page you should be able to accomplish the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install the AS2 Connector.</p>
</li>
<li>
<p>Build a simple Hello World project.</p>
</li>
<li>
<p>Run the example project.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document assumes that you are familiar with Mule, the <a href="/anypoint-studio/v/6/index">Anypoint Studio Essentials</a> and <a href="/mule-user-guide/v/3.8/global-elements">Global Elements</a>. Further, it is assumed that you are familiar with AS2 endpoints and have received endpoint configuration requirements.</p>
</div>
<div class="sect2">
<h3 id="_namespace_and_schema_location"><a class="anchor" href="#_namespace_and_schema_location"></a>Namespace and Schema Location</h3>
<div class="paragraph">
<p>The XML namespace and schema location are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>xmlns:as2="http://www.mulesoft.org/schema/mule/as2"

http://xsischemaLocation=[xsi:schemaLocation=]"

...

http://www.mulesoft.org/schema/mule/as2 http://www.mulesoft.org/schema/mule/as2/current/mule-as2.xsd"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_requirements"><a class="anchor" href="#_requirements"></a>Requirements</h3>
<div class="ulist">
<ul>
<li>
<p>Mule 3.5.2, 3.6.1 or 3.7.2 Runtime</p>
</li>
<li>
<p>Anypoint Studio March 2015 onwards</p>
</li>
<li>
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html">JCE unlimited strength jurisdiction policy</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation"><a class="anchor" href="#_installation"></a>Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_installing_as2_connector_in_anypoint_studio"><a class="anchor" href="#_installing_as2_connector_in_anypoint_studio"></a>Installing AS2 Connector in Anypoint Studio</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Anypoint Studio, click the Exchange icon in the Studio taskbar.</p>
</li>
<li>
<p>Click Login in Anypoint Exchange.</p>
</li>
<li>
<p>Search for the connector and click Install.</p>
</li>
<li>
<p>Follow the prompts to install the connector.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When Studio has an update, a message displays in the lower right corner, which you can click to install the update.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_as2_connector_via_maven"><a class="anchor" href="#_using_as2_connector_via_maven"></a>Using AS2 Connector via Maven</h3>
<div class="paragraph">
<p>If you wish to use the AS2 Connector in conjunction with Maven, please follow the instructions <a href="http://modusintegration.github.io/mule-connector-as2/2.0.0/apidocs/guide/install.html">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_this_connector"><a class="anchor" href="#_using_this_connector"></a>Using This Connector</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_use_cases"><a class="anchor" href="#_use_cases"></a>Use Cases</h3>
<div class="ulist">
<ul>
<li>
<p>Send an AS2 Message</p>
</li>
<li>
<p>Receive an AS2 Message</p>
</li>
<li>
<p>Signed and/or encrypted and/or compressed AS2 messages</p>
</li>
<li>
<p>Signed or unsigned receipts</p>
</li>
<li>
<p>Synchronous or asynchronous receipts</p>
</li>
<li>
<p>HTTP/HTTPS support</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_tips"><a class="anchor" href="#_tips"></a>Tips</h3>
<div class="ulist">
<ul>
<li>
<p>Pick unique AS2 IDs per connector instance, it will help you track your messages</p>
</li>
<li>
<p>Test your trading partner ports and your own are open and reachable</p>
</li>
<li>
<p>It is recommended to use port 80 and 443 when possible (avoids mapping firewall rules for each partner)</p>
</li>
<li>
<p>When creating certificates, include its expiration date and your AS2 ID in the filename.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adding_to_a_flow"><a class="anchor" href="#_adding_to_a_flow"></a>Adding to a Flow</h3>
<div class="paragraph">
<p>Using the AS2 Connector in your application is explained in detail in the Example Use Case section below.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_use_case_hello_world"><a class="anchor" href="#_example_use_case_hello_world"></a>Example Use Case - Hello World</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following example requires basic familiarity with AS2, Anypoint Studio, and Mule Runtime.</p>
</div>
<div class="sect2">
<h3 id="_receive_any_as2_message_over_http"><a class="anchor" href="#_receive_any_as2_message_over_http"></a>Receive any AS2 message over HTTP</h3>
<div class="sect3">
<h4 id="_step_1"><a class="anchor" href="#_step_1"></a>Step 1</h4>
<div class="paragraph">
<p>Create a new Mule Project with Mule Server 3.6.0 EE as runtime:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/receive-example-step-1.png" alt="receive-example-step-1"></span><br></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_2"><a class="anchor" href="#_step_2"></a>Step 2</h4>
<div class="paragraph">
<p>Locate the AS2 Connector on the right hand-side palette:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/receive-example-step-2.png" alt="receive-example-step-2"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_3"><a class="anchor" href="#_step_3"></a>Step 3</h4>
<div class="paragraph">
<p>Drag the connector over to the canvas:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/receive-example-step-3.png" alt="receive-example-step-3"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_4"><a class="anchor" href="#_step_4"></a>Step 4</h4>
<div class="paragraph">
<p>The connector requires an AS2 Connector Configuration. To create a connector configuration, you must first create a global HTTP endpoint and then bind the connector configuration to the endpoint. The connector’s operations leverage the HTTP endpoint to receive and send AS2 messages.</p>
</div>
<div class="paragraph">
<p>Click the Global Elements tab and create an HTTP endpoint:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/4+http+global.png" alt="4+http+global"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_5"><a class="anchor" href="#_step_5"></a>Step 5</h4>
<div class="paragraph">
<p>Give the HTTP connector a more descriptive name like “receive-as2-http-endpoint”. Click the Connector Configuration add symbol to bring up the HTTP connector configuration dialog:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/5+configure+http.png" alt="5+configure+http"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_6"><a class="anchor" href="#_step_6"></a>Step 6</h4>
<div class="paragraph">
<p>Give the HTTP connector name a more descriptive name like “as2-http-connector” and press OK to go back to the global HTTP endpoint dialog box:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/6+as2+http.png" alt="6+as2+http"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_7"><a class="anchor" href="#_step_7"></a>Step 7</h4>
<div class="paragraph">
<p>Press OK to close the global HTTP endpoint dialog box:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/7+endpoint.png" alt="7+endpoint"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_8"><a class="anchor" href="#_step_8"></a>Step 8</h4>
<div class="paragraph">
<p>In this step, you will make an AS2 connector configuration and bind it to the global HTTP endpoint. Create an AS2 Connector Configuration from the Global Elements view:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-25-step8-glob-elem.png" alt="image2015-6-25+21%3A7%3A49"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_9"><a class="anchor" href="#_step_9"></a>Step 9</h4>
<div class="paragraph">
<p>Type “receive-as2-http-endpoint” in the attribute Global HTTP Endpoint Reference to bind the AS2 connector to the previously created global HTTP endpoint. Press OK.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-25-receive-as2.png" alt="image2015-6-25+21%3A10%3A5"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_10"><a class="anchor" href="#_step_10"></a>Step 10</h4>
<div class="paragraph">
<p>After completing the previous steps, you should have the following in the Global Elements view:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-25-step10a.png" alt="image2015-6-25+21%3A11%3A5"></span></p>
</div>
<div class="paragraph">
<p>Back to the Message Flow view, on the AS2 message source, select “AS2” from the Connector Configuration drop-down list and select “Receive” from the Operation drop-down list:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-25-step10-select-receive.png" alt="image2015-6-25+21%3A13%3A1"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_11"><a class="anchor" href="#_step_11"></a>Step 11</h4>
<div class="paragraph">
<p>The connector’s Key Store Path attribute must be configured in either of the following scenarios:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connector receives a signed request</p>
</li>
<li>
<p>Connector receives an encrypted request</p>
</li>
<li>
<p>Sender requests a signed receipt</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The key store must be in JKS format. A cross-platform tool that can help you with the setting up of JKS key
stores is <a href="http://keystore-explorer.sourceforge.net/">KeyStore Explorer</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
CloudHub deployments must have key stores located within the Mule application Java classpath (e.g., src/main/resources).
Furthermore, the key store path attribute has to be relative to the classpath. For instance, if the key store is located
at src/main/resources/key-stores/my-key-store.jks, then Key Store Path is set to key-stores/my-key-store.jks.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For scenario 1, the key store has to contain the certificate used by the AS2 connector to verify the request’s authenticity.
Scenario 2 and 3 require the key store to have a dual-purpose public/private key pair that the connector uses to decrypt
the request and sign the receipt. The key store entry alias name for the certificate is required to match the AS2-From field
received in the request’s headers. Similarly, the key store entry alias name for the public/private key pair is required to match
the AS2-To field received in the request’s headers. The attribute Key Store Password must be set if the key store is protected by a password.</p>
</div>
<div class="paragraph">
<p>For the sake of keeping the example simple, no key store is set so no security is provided by the connector.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_12"><a class="anchor" href="#_step_12"></a>Step 12</h4>
<div class="paragraph">
<p>Add a File outbound endpoint to save the sender’s AS2 message content. Drag a File outbound endpoint from the palette next to the AS2 Connector. Set the Path attribute to “inbox” and Output Pattern to “data.txt”:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-25-step12a.png" alt="image2015-6-25+21%3A15%3A36"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_13"><a class="anchor" href="#_step_13"></a>Step 13</h4>
<div class="paragraph">
<p>Finally, run the example as a Mule application:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-25-step13a.png" alt="image2015-6-25+21%3A16%3A12"></span></p>
</div>
<div class="paragraph">
<p>The connector saves the content of valid AS2 messages in the file “data.txt” inside the project root directory “inbox”.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_send_a_clear_and_unsigned_as2_message_over_http"><a class="anchor" href="#_send_a_clear_and_unsigned_as2_message_over_http"></a>Send a Clear and Unsigned AS2 Message Over HTTP</h3>
<div class="sect3">
<h4 id="_step_1_2"><a class="anchor" href="#_step_1_2"></a>Step 1</h4>
<div class="paragraph">
<p>Create a new Mule Project with Mule Server 3.6.0 EE as runtime:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step1b.png" alt="image2015-6-26+9%3A7%3A18"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_2_2"><a class="anchor" href="#_step_2_2"></a>Step 2</h4>
<div class="paragraph">
<p>Drag a File inbound endpoint to the canvas to create a message source for a flow. Set the Path attribute to “outbox”:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step2b.png" alt="image2015-6-26+9%3A18%3A1"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_3_2"><a class="anchor" href="#_step_3_2"></a>Step 3</h4>
<div class="paragraph">
<p>Locate the AS2 Connector on the right hand-side palette:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step3b.png" alt="image2015-6-26+9%3A19%3A48"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_4_2"><a class="anchor" href="#_step_4_2"></a>Step 4</h4>
<div class="paragraph">
<p>Drag the connector over to the canvas next to the File message source:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step4b.png" alt="image2015-6-26+9%3A21%3A35"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_5_2"><a class="anchor" href="#_step_5_2"></a>Step 5</h4>
<div class="paragraph">
<p>The connector requires an AS2 Connector Configuration. To create a connector configuration, you must first create a global HTTP endpoint and then bind the connector configuration to the endpoint. The connector’s operations leverage the HTTP transport to receive and send AS2 messages.</p>
</div>
<div class="paragraph">
<p>Click on the Global Elements tab and create an HTTP endpoint:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step5b.png" alt="image2015-6-26+9%3A23%3A54"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_6_2"><a class="anchor" href="#_step_6_2"></a>Step 6</h4>
<div class="paragraph">
<p>Give the endpoint HTTP connector a more descriptive name like “send-as2-http-endpoint”. Set the host, port and path
attributes to point to an AS2 receiver. Click on the Connector Configuration add symbol to bring up the HTTP connector
configuration dialog:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step6b.png" alt="image2015-6-26+9%3A25%3A58"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_7_2"><a class="anchor" href="#_step_7_2"></a>Step 7</h4>
<div class="paragraph">
<p>Give the HTTP connector a more descriptive name like “as2-http-connector” and press OK to go back to the global HTTP endpoint dialog box:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step7b.png" alt="image2015-6-26+9%3A36%3A29"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_8_2"><a class="anchor" href="#_step_8_2"></a>Step 8</h4>
<div class="paragraph">
<p>Press OK to close the global HTTP endpoint dialog box:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step8b.png" alt="image2015-6-26+9%3A28%3A33"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_9_2"><a class="anchor" href="#_step_9_2"></a>Step 9</h4>
<div class="paragraph">
<p>In this step, you make an AS2 connector configuration and bind it to the global HTTP connector. From the Global Elements view, create an AS2 Connector Configuration:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-25-step8-glob-elem.png" alt="image2015-6-25+21%3A7%3A49"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_10_2"><a class="anchor" href="#_step_10_2"></a>Step 10</h4>
<div class="paragraph">
<p>Type “send-as2-http-endpoint” in the attribute Global HTTP Endpoint Reference to bind the AS2 connector to the previously created global HTTP connector. Press OK.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step10b.png" alt="image2015-6-26+9%3A31%3A14"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_11_2"><a class="anchor" href="#_step_11_2"></a>Step 11</h4>
<div class="paragraph">
<p>After completing the previous steps, you should have the following in the Global Elements view:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step11b.png" alt="image2015-6-26+9%3A32%3A54"></span></p>
</div>
<div class="paragraph">
<p>Back to the Message Flow view, on the AS2 processor, select “AS2” from the Connector Configuration drop-down list and select “Send” from the Operation drop-down list:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step11bb.png" alt="image2015-6-26+9%3A37%3A25"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_12_2"><a class="anchor" href="#_step_12_2"></a>Step 12</h4>
<div class="paragraph">
<p>Populate the AS2-From and AS2-To attributes. The AS2-To identifier is typically provided out-of-band by the AS2 receiver.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step12b.png" alt="image2015-6-26+9%3A38%3A57"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_step_13_2"><a class="anchor" href="#_step_13_2"></a>Step 13</h4>
<div class="paragraph">
<p>The connector’s Key Store Path attribute must be configured in either of the following scenarios:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connector sends a signed request<br></p>
</li>
<li>
<p>Connector sends an encrypted request<br></p>
</li>
<li>
<p>Receiver returns a signed receipt</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The key store must be in JKS format. A cross-platform tool that can help you with the setting up of JKS key
stores is <a href="http://keystore-explorer.sourceforge.net/">KeyStore Explorer</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
CloudHub deployments must have key stores located within the Mule application Java classpath (e.g., src/main/resources).
Furthermore, the key store path attribute has to be relative to the classpath. For instance, if the key store is located
at src/main/resources/key-stores/my-key-store.jks, then Key Store Path is set to key-stores/my-key-store.jks.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Scenario 1 and 2 require the key store to have a dual-purpose public/private key pair that the connector uses to encrypt
and sign the request. For scenario 3, the key store has to contain the certificate used by the AS2 connector to verify the
receipt’s authenticity. The key store entry alias name for the public/private key pair is required to match the value set
in the AS2-From attribute. Similarly, the key store entry alias name for the certificate is required to match the value
set in the AS2-To attribute. The attribute Key Store Password must be set if the key store is protected by a password.</p>
</div>
<div class="paragraph">
<p>For the sake of keeping the example simple, no key store is set so no security is provided by the connector.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_14"><a class="anchor" href="#_step_14"></a>Step 14</h4>
<div class="paragraph">
<p>Viewing the receipt returned by the AS2 receiver is optional but useful for testing. Append to the flow a Byte Array to String transformer followed by a Logger processor to print the receipt&#8217;s content to console.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step14.png" alt="image2015-6-26+9%3A41%3A2"></span></p>
</div>
<div class="paragraph">
<p>Note that the Logger in the screenshot has its Message attribute set to "#[payload]"</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_15"><a class="anchor" href="#_step_15"></a>Step 15</h4>
<div class="paragraph">
<p>Finally, run the example as a Mule application:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/image2015-6-26-step15.png" alt="image2015-6-26+9%3A41%3A51"></span></p>
</div>
<div class="paragraph">
<p>Drop a file in the "outbox" directory to send it to the receiver over AS2. If you have followed step 14, you should see the receiver&#8217;s receipt in the console.</p>
</div>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
